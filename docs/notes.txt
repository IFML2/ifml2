ЯРИЛ 2.0 Заметки к выпускам
==========================================================================
Обозначения:
--------------------------------------------------------------------------
+	добавление
~	изменение
*	исправление
!	информация
Д	Движок
П	Плеер
Р	Редактор
К   Комплектность стандартной поставки
Я	Полная поддержка: Движок, Редактор, Плеер
==========================================================================
Issue tracker: https://www.hostedredmine.com/projects/ifml2/issues
(для доступа нужно регистрироваться, а также Вас должны добавить в проект)
==========================================================================

---------------------------------------
Прототип 10 выпуск 4
---------------------------------------
11.03.2013:
*   Исправлен неверный путь к игре в единственном тесте.
+   Редактирование инструкции "Проверка условия".
*   Исправлены некоторые инструкции.
~   В редактор предмета возвращён идентификатор, т.к. он нужен в инструкциях (в выражениях).
+   Теперь, если фраза слишком длинная, парсер отвечает так: "Я бы понял, если бы вы сказали "{0}", но я не понял вот эту часть фразы: "{1}"."
+   А в случае, когда фраза слишком короткая, и не хватает объектов, парсер кроме вопросительных слов в падежах (например, "Что?") также пишет "(пишите ответ полностью)".
+   В редактор перехвата добавлен предпросмотр списка инструкций, работает двойной щелчёк.
!   Вообще, в Редакторе двойной щелчёк работает на всех списках подлежащих объектов.
16.03.2013:
~   Убрана поддержка старых не используемых инструкций.
~   Рефакторинг редакторов инструкций.
~   Общий рефакторинг.
*   Исправлена ошибка, из-за которой редактируемые инструкции в списке по кнопке "Редактировать инструкции..." не сохранялись после редактирования.
17.03.2013:
~   Рефакторинг всех редакторов.
25.03.2013:
+   Начата работа над редактором действий: созданы 2 вкладки ("Действия истории", "Действия в библиотеках"), в первой загружается список действий.

---------------------------------------
Прототип 10 выпуск 3
---------------------------------------
19.02.2013:
+   Немного доработан редактор Ловушек - подгружаются действия и их параметры.
20.02.2013:
+   Доработан редактор Ловушек - правильно подгружаются параметры и тип ловушки.
*   Исправлена ошибка при загрузке Спелеолога.
+   Улучшен редактор Предметов - при открытии окна список локаций прокручивается до выбранной.
23.02.2013:
+   Запуск истории из Редактора теперь осуществляется без сохранения в файл.
*   Правильно настроена модальность окон - например, Редактор не мешает запущенному из него Плееру.
25.02.2013:
~   Мелкий рефакторинг.
28.02.2013:
+   Инструкции грузятся в список в редакторе инструкций.
03.03.2013:
+   Добавлены иконки.
~   Внутренний рефакторинг форм.
~   Запуск игры в Плеер из Редактора переделана на временный (temp) файл.
+   Редактирование ловушек и инструкций по двойному щелчку.
+   Доделан редактор ловушек.
+   Редактор инструкий сделан частично (пока только простая версия инструкции "Вывести сообщение").
+   Редактирование инструкций для ловушек.
+   Launcher поддерживает tester как входной параметр, а также показывает окно выбора приложения, если параметр не задан.
+   Работают кнопки перемещения инструкций в списке.
09.03.2013:
+   Редактор инструкции "Вывести сообщение" доработан до актуального состояния.

---------------------------------------
Прототип 10 выпуск 2
---------------------------------------
26.01.2013:
д   ~   Улучшен вывод при осмотре предмета: для открываемых предметов теперь ставится подпись "(открыт)" или "(закрыт)"
д   +   При открытии предмета выводится список содержащихся в нём предметов.
д   +   Предметы можно теперь брать из/с и класть в/на.
к   +   Доработки игры "Тайна заброшенного храма".
д   +   Оператор "или" в выражениях.

---------------------------------------
Прототип 10 выпуск 1
---------------------------------------
Отличия от 9го прототипа (с 05.09.2012):
д   +   Теперь работают роли на уровне Движка.
д   +   В роли добавлены триггеры для проверки доступности вложенных объектов.
к   +   Роль "контейнер" теперь проверяет, закрыт ли контейнер, и выводит описание вложенных предметов в зависимости от этого.
д   +   Инструкция "Вернуть значение" (return) для возврата результата, например, из триггеров.
д   +   Орператор "в" для проверки, входит ли предмет в коллекцию.
к   +   В игре "ZorkPort" можно открывать ящик и читать письмо.
д   +   Коллекция "Пустота" для симуляции создания и удаления объектов.
д   *   Улучшено вылавливание ошибок.
я   ~   Папка Samples теперь называется Games.
д   +   Добавлено подробное логирование в файл ifml2.log.
ifml2-53426 контейнер и плоскость:
    +   у объекта можно проверять наличие роли, а также получать значение свойства, данное ролью
    +   "осмотреть" теперь описывает и лежащие сверху предметы

---------------------------------------
Прототип 9 (в разработке)
---------------------------------------
25.12.2011:
р   ~   Форма предмета переработана - компоненты разделены на 3 вкладки: "Основные свойства", "Признаки предмета" и "Перехваты действий"
р   +   Загрузка истории вынесена в отдельный поток, это позволило показывать бегающий прогресс во время загрузки; но нужно ещё блокировать меню и проч.
р   +   Начат редактор перехватов
16.01.2012:
р   +   Продолжена работа над редактором перехватов
р   *   Исправлена ошибка при редактировании процедур
06.02.2012:
р   +   Продолжена работа над редактором перехватов, есть идея по универсальному редактору инструкций - это дерево
13.02.2012:
д   *   Исправлен баг 52228: Пропали падежи в выводе сообщений, например по предмет.вп
я   +   Дополненная версия библиотеки Глаголы от Andy
18.02.2012:
п   +   В Плеер добавлена комена "заново!", загружающая файл и начинающая игру заново
д   *   Теперь, если в выражении происходит обращение к несуществующему свойству, происходит ошибка (ранее возвращалось логическое значение "нет")
23.02.2012:
д   +   Доделаны переменные: пока локальные и процедурные, числа складываются друг с другом, текст можно складывать с любой величиной
д   *   Исправлена передача контекста - теперь локальные переменные внутри структур не видны снаружи
18.03.2012:
д   ~   Теперь целые числа выводятся без .0
я   *   Исправлена ошибка в xsd-схеме
04.04.2012:
я   +   Доработки порта Спелеолога - готовы все локации и начальные предметы.
д   +   Добавлена поддержка Вверх и Вниз в локациях.
08.04.2012:
д   +   Действия теперь поддерживают много шаблонов.
я   +   Спелеолог доработан чуть дальше - лиана срезается.
д   +   Глобальные переменные - описываются в опциях истории.
д   ~   Разные виды переменных (глобальные, процедурные, локальные) теперь управляются правильно.
15.04.2012:
я   +   Доработан Спелеолог.
22.04.2012:
д   +   Ограничения на действия. Срабатывают до перехватов (ловушек).
25.04.2012:
д   +   Начата работа над ролями.
д   +   Поддержка логического "и" в вычислителе выражений.
к   +   В библиотеку "Глаголы" добавлена команда "взять всё".
13.08.2012:
д   +   Продолжена работа над ролями.
26.08.2012:
п   ~   Теперь Плеер создаётся также, как Редактор.
я   *   Мелкие правки кода.
27.08.2012:
д   ~   мелкие изменения
28.08.2012:
д   ~   Рефакторинг.
05.09.2012:
д   ~   Перевод загрузки ссылок на внешние объекты (в библиотеках) на свой IDResolver.

---------------------------------------
Прототип 8 фикс 7 бета 2 (в разработке)
---------------------------------------
09.10.2011:
д   ~   Если первоначальное положение предмета в нескольких локациях, то он не клонируется, а это один и тот же предмет
д	~	Начата большая внутренняя переделка событийной модели
р   *   Исправлен диалог подтвреждения удаления локации
р   *   Bug #24373: Не сохраняются настройки локаций в первоначальном положении предмета
р	*	Таблица со всеми признаками (справочник) теперь больше не редактируется
р	~	Убрана лишняя кнопка в редакторе словарной записи
р   +   Начат редактор действий
д   ~   Локации и предметы переведены с HashMap на GlazedLists
18.12.2011:
д + Ловушки на предметах загружаются из файла и срабатывают!

-------------------------------------
Прототип 8 фикс 7 бета (в разработке)
-------------------------------------
п   *   Исправлена ошибка, при которой, если у словарного слова нет ссылок на объекты, парсер выдавал внутреннюю ошибку. Теперь он пишет "Нигде не вижу {ВП}".
п   *   Исправлена ошибка, при которой, если вводилось, например, "осм абракадабра", парсер писал, что понял бы "осм", а должен был писать, что не знает "абракадабру".
п   *   При попытке взять фиксированный предмет в том числе женского пола писалось "{ИП} прочто закреплён."; применено временное решение: "Предмет прочно закреплён.".
я   +   Добавлен Тестер
27.08.2011:
я   +   Код интерфейса Тестера немного оптимизирован

------------------------------------
Прототип 8 фикс 6
------------------------------------
д   ~   основное слово в ссылке не словарную запись теперь не обязательное
п   ~   при неопределённости выбора объекта (предмета) теперь выводится не "Не понятно, который(-ая,-ое) <объект> имеется в виду.", а "Не понятно, что за <объект> имеется в виду."
п   *   исправленена ошибка в парсере
я   ~   удалены старые примеры, примеры переведены на новый словарь, добавлены новые примеры
я   ~   доки перенесены в подпапку Architecture
я   +   расширенное первоначальное положение предмета - инвентарь или в какой-то из локаций
р   *   раньше при ошибке в редакторе сообщение было без причины ошибки
д   *   предметы при помещении куда-либо (инвентарь, локации) теперь клонируются
д   ~   в парсере по возможности убрано "Я" из предложений
я   ~   под новое положение предмета исправлены примеры Зорка и Спела
п   *   Bug #14125: При вводе команды без параметра она не пишется в форме вопроса
я   ~   под стартовую позицию предметов исправлены примеры Спелеолог и Тайна
п   *   Bug #21746: Парсер не видит предметы
я   +   в Тайне добавлен везде потолок, он клонируется
п   +   2 новых переменных отладки: куча (ид всех объектов) и словарь (все слова)

------------------------------------
Прототип 8 фикс 5
------------------------------------
д	~	При описании локации вместо "А также тут" пишется "Здесь же" для предметов.
д	~	Если при взятии предмет закфиксирован, то выдаётся фраза "<предмет> прочно закреплён".
р	*	Исправлена ошибка при загрузке библиотеки.
д	~	При попытке взять предмет с признаком частьПейзажа выдаётся сообщение "Это невозможно."
р	~	Признаки локаций пока скрыты
п	*	Теперь, если чего-то из имени игры, описания, версии или автора нет, то вместо null выводится "<Без ...>"
р	+	Теперь при ошибке при загрузке истории в Редакторе выводится окно с сообщением об ошибке
Support #11945: Мобильные предметы вынести из окна локаций:
	~ Предметы вынесены из локаций в окно справа, окно переименовано в "Предметы" (было "Предметы, не размещённые в локациях")
	+ Предметы теперь ссылаются на локацию, в которой появились
	~ Общий рефакторинг и улучшения
Bug #11929: При закрытии Плеера закрывается и Редактор
Feature #11947: Переработка словаря:
	~ главном меню пока скрыть словарь
	~ в локациях тоже
	+ в предметах будет написана фраза, каждому словосочетанию которой можно будет задать падежи (в отдельном окошечке), а также указать основное словосочетание
	+ парсер должен понимать обращение к предмету по любому из словосочетаний или их последовательности

------------------------------------
Версия (Прототип 8 фикс 4)
------------------------------------
д	+	КалькуляторВыражений теперь понимает падежи у объектов, например, "предмет.РП"
д	*	Команды "взять" и "бросить" теперь выдают сообщения с правильными падежами объектов ("Вы взяли веревку.")
р	~	Рамка признаков локации переменована в "Признаки локации", а рамка признаков предмета - в "Признаки предмета" для большей наглядности

------------------------------------
Версия (Прототип 8 фикс 3)
------------------------------------
р	+	Автогенерация ИД теперь избегает не только избегает имён других объектов, но и ИП словарных слов и процедур
р	+	Окно описания предмета теперь имеет вертикальную полосу прокрутки
р	~	Окна идентификаторов пока скрыты в окнах редактирования локация и предметов
д	+	Небольшие модификации в системе отлова исключений - по возможности убраны тихие исключения
д	+	При попытке взятия зафиксированных предметов парсер теперь сообщает и ИП предмета также ("Алтарь надёжно зафиксирован на месте.")

------------------------------------
Версия (Прототип 8 фикс 2)
------------------------------------
д   +   Добавлена возможность перекрывать системные процедуры (атрибут процедуры inheritsSystemProcedure). Пока можно перекрывать только описание локации (вызывается инструкцией showLocName)
д	+	Процедура "ОписатьТекущуюЛокацию" (из стандартной библиотеки "Глаголы") теперь перекрывает системную процедуру описание текущей локации (вызывается инструкцией showLocName)

------------------------------------
Версия 0.8.0.1 (Прототип 8)
------------------------------------
д   *   Исправлена ошибка: история сохранялась битой, если у объектов были признаки. Кроме того, теперь, если при сохранении возникает ошибка, появлется окно с сообщением.

------------------------------------
Версия 0.8.0.0 (Прототип 8)
------------------------------------
д	+	Признаки: набор признаков у объекта; КалькуляторВыражений понимает конструкцию "объект.признак" - является логической: ДА, если признак у объекта есть; НЕТ - если признака нет.
б	+	В стандартную команду "взять" добавить проверку: если у объекта есть признак "зафиксирован", то вместо взятия выдавать фразу "Объект надёжно закреплён на месте."
д	+	Процедуры содержат список параметров; элемент шаблона может указывать на параметр вызываемой процедуры, в который передастся значение формального элемента (вместо указания при вызове процедуры номеров передаваемых формальных элементов); КалькуляторВыражений понимает обращение к именованным параметрам процедуры (вместо $<число>) .
д	+	Если у предмета нет описания, инструкция ВывестиОписаниеПредмета выводит текст "Ничего особенного."
д	+	Название истории, описание, версия, автор - для показа при запуске игры в плеере.
д	+	Предмет может быть частью пейзажа - тогда он не упоминается отдельно от описания - это признак на предмете "частьПейзажа" (ИЛ001).
д	~	Вынос признаков в отдельные объявления (с описаниями) в отдельную библиотеку и использование только объявленных признаков.
д	+	Действия теперь имеют имя и описание.
др	~	Переработать предметы: предмет описывается непосредственно внутри того контейнера, где находится, в нашем случае - в локации. Предметы, которые нигде пока не используются, описываются в отдельном хранилище (как и сейчас - <items>).
д	!	Известная ошибка JAXB: нельзя создавать идентификаторы, одинаковые с любым из ИП словаря.
р	+	Редактору при запуске теперь можно передавать параметр - путь к истории для загрузки.
р	+	Редактирование предметов внутри локаций.
р	+	Редактирование признаков в локациях и предметах.
д	*	Исправлена ошибка, приводящая к тому, что стартовая процедура не запускалась (писалось "произошла ошибка: null").
р	!	Known bug: редактирование признаков не транзакционное (Cancel не отменит редактирование)

------------------------------------
Версия 0.7.0.1 (Прототип 7 hotfix 1)
------------------------------------
Р	*	Библиотеки не добавлялись.
Д	*	При сохранении файл иногда сохранялся с 0 размером (причина: ошибка при преобразовании объекта без ссылки на словарь).
Д	*	В некоторых фразах добавлены забытые точки.
Д	*	Сообщение об ошибке при попытке бросить (инструкция dropItem) локацию заменено на адекватный отказ.
Д	*	Убрана очепятка во фразе "Вы мне можете взять локацию".

---------------------------
Версия 0.7.0.0 (Прототип 7)
---------------------------
П	+	Возможность запускать плеер с аргументом - именем файла истории (путь).
Р	+	Пункт "Запустить историю в плеере...".
П	~	Строка ввода: увеличен шрифт, курсор стал тоже (как и шрифт) зелёным и более крупным.
Я	+	Поддержка стартовой локации и опции "Показывать описание стартовой локации в начале игры".
Я	+	Поддержка опции "Процедура, выполняющаяся перед началом игры".
Я	+	Инструкция: вывод сообщения на экран.
Р	+	Частичное редактирование процедур - можно редактировать только инструкцию "Вывести сообщение".
П	~	В локации при описании предметов "также тут" заменено на "здесь же", в конце добавлена точка.
д	*	Точки в конце фраз.
д	*	Конфликт "Вы" и "ты" решён: везде обращение на "Вы".
я	+	Стандартная команда и соотвествующая инструкция "бросить" (предмет перемещается из инвентаря в локацию).
п	+	История введённых команд, прокручивается клавишами "вверх" и "вниз"
р	+	Редактирование предметов.
р	+	Редактирование предметов в локации.
р	+	Кнопки редактирования списков локаций и предметов теперь меняют состояния.
р	+	Редактор: Идентификатор генерится автоматом как CamelCase из названия, но с учётом уникальности (при нарушении уникальности в конец добавляются числа).
д	*	Исправлена ошибка, появляющаяся при попытке осмотреть локацию командой "осмотреть <имя локации>" (например, "осмотреть комнату").
д	+	Инструкция "Проверка условия": содержит под собой 2 блока инструкций - "тогда" (<then>), "иначе" (<else>).
д	+	Переписан вычислитель выражений: теперь поддерживаются операции точка (".", получение свойства объекта) и сравнение ("=") - в любых комбинациях с операндами, которые могут быть: идентификатор объекта игры, системная переменная, логический литерал ("да" или "нет"), обращение к параметру процедуры ($<число>).
