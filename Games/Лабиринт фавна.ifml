<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<story xmlns="http://toysoft.narod.ru/IFML2Schema" id="story">
    <storyOptions>
        <startLocationOption showStartLocDesc="false" location="ЦентрЛок"/>
        <startProcedureOption procedure="Стартовая"/>
        <storyDescription version="8" name="ЛАБИРИНТ ФАВНА" description="Игра по мотивам одноименного фильма."
                          author="Репин Андрей ( Russian Bear) и Елизаров Илья (Saint)"/>
        <globalVars>
            <var value="нет" name="КнигаОткрыта"/>
            <var value="1" name="ЗаписьВкниге"/>
            <var value="1" name="статуя"/>
            <var value="1" name="пещера"/>
            <var value="нет" name="дверь"/>
            <var value="нет" name="СтатуяМел"/>
            <var value="нет" name="СтатуяКамень"/>
            <var value="0" name="ключ"/>
        </globalVars>
    </storyOptions>
    <procedures>
        <procedure name="бить">
            <procedureVariables/>
            <procedureBody>
                <if condition="КинжалПред в инвентарий">
                    <else/>
                    <then>
                        <showMessage type="text" message="&#xA;Не нужно никого убивать здесь. Успокойтесь." carriageReturn="true"
                                     beginWithCap="false"/>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="каменьЖабе">
            <procedureVariables/>
            <procedureBody>
                <if condition="ТекущаяЛокация = ЯмаЛок">
                    <else>
                        <showMessage type="text" message="&#xA;Здесь жабы замечены не были.&#xA;" carriageReturn="true"
                                     beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="ЖабаПред в ЯмаЛок.предметы">
                            <else>
                                <showMessage type="text" message="&#xA;Не вижу здесь никакой жабы.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="КаменьПред в инвентарий">
                                    <else>
                                        <showMessage type="text" message="&#xA;У Вас нет камня.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <if condition="ЖукПред в КаменьПред.предметыСверху">
                                            <else>
                                                <showMessage type="text"
                                                             message="&#xA;     Вы попробовали дать жабе камень, но она не обращает на него никакого внимания.&#xA;"
                                                             carriageReturn="true" beginWithCap="false"/>
                                            </else>
                                            <then>
                                                <showMessage type="text"
                                                             message="&#xA;Жаба схватила букашку своим липким языком, а заодно с ней и камень, и проглотила наживку. Наверное, минуту, или больше, ничего не происходило. А потом жаба начала вести себя как-то странно. Она начала вращать и выпучивать глаза, дергать лапами, пытаться прыгать, ее язык то выскакивал наружу, дико извиваясь, то опять прятался в пасти. И вдруг жаба изрыгнула из себя огромный комок слизи. Выглядело это так, как будто она вывернула себя наизнанку в виде комка ядовито-желтой слизи, с прожилками черного и буро-зеленого цвета. &#xA;"
                                                             carriageReturn="true" beginWithCap="false"/>
                                                <if condition="не КаменьПред в СкрытаяЛок.предметы">
                                                    <else/>
                                                    <then>
                                                        <moveItem to="СкрытаяЛок.предметы" item="КаменьПред"/>
                                                    </then>
                                                </if>
                                                <var value="1" name="ключ"/>
                                                <if condition="не ЖабаПред в скрытаяЛок.предметы">
                                                    <else/>
                                                    <then>
                                                        <moveItem to="скрытаяЛок.предметы" item="ЖабаПред"/>
                                                    </then>
                                                </if>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="положить">
            <procedureVariables/>
            <procedureBody>
                <showMessage type="text" message="&#xA;Если Вы хотите положить что-то на пол, то просто бросьте это что-то.&#xA;"
                             carriageReturn="true" beginWithCap="false"/>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="спуститьсяВЯму">
            <procedureVariables/>
            <procedureBody>
                <if condition="ТекущаяЛокация = ЯмаЛок">
                    <else>
                        <showMessage type="text" message="&#xA;Нет здесь никакой ямы.&#xA;" carriageReturn="true" beginWithCap="false"/>
                    </else>
                    <then>
                        <showMessage type="text"
                                     message="&#xD;&#xA;     Чтобы узнать источник происхождения странных звуков, вы спустились в яму и увидели там огромную жабу.  Жуки и мокрицы падают к ней в яму и  копошатся вокруг нее, а она лениво выхватывает их своим длинным, липким языком одного за другим, и съедает. &#xD;&#xA;     Эта процедура и является причиной раздающихся чавкающих и  хлюпающих  звуков.&#xD;&#xA;"
                                     carriageReturn="true" beginWithCap="false"/>
                        <if condition="не ЖабаПред в ЯмаЛок.предметы">
                            <else/>
                            <then>
                                <moveItem to="ЯмаЛок.предметы" item="ЖабаПред"/>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="искатьКлюч">
            <procedureVariables/>
            <procedureBody>
                <if condition="ТекущаяЛокация = ЯмаЛок">
                    <else>
                        <showMessage type="text" message="&#xA;Здесь нет ключа.&#xA;" carriageReturn="true" beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="ключ = 1">
                            <else>
                                <showMessage type="text" message="&#xA;Здесь нет ключа.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;     Офелия сунула руку в комок  желтой слизи и достала оттуда причудливой формы ключ.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <var value="2" name="ключ"/>
                                <if condition="не КлючПред в инвентарий">
                                    <else/>
                                    <then>
                                        <moveItem to="инвентарий" item="КлючПред"/>
                                    </then>
                                </if>
                                <var value="3" name="ЗаписьВкниге"/>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="Стартовая">
            <procedureVariables/>
            <procedureBody>
                <showMessage type="text"
                             message="&#xA;     Давным-давно, когда эльфы жили среди людей, произошел раскол между людьми и расами другого мира. Эльфы, как и все существа тонкого мира, ушли с Земли.&#xA;Но у короля эльфов была дочь. Маленькая, любопытная девочка, желающая увидеть мир людей своими глазами. Она убежала из дворца, и проникла в другой мир – мир людей. Солнечный свет ослепил ее, и она забыла кто она, а ее бессмертная душа продолжила свой путь в мире людей, переходя из одного тела в другое.&#xA;     Но король эльфов не отчаялся. Он верил, что его дочь когда-нибудь вернется.&#xA;Поэтому он приказал открыть по всему человеческому миру проходы в тонкий мир и дал задание всем своим подданным, чтобы они искали его дочь.&#xA;     Девочка по имени Офелия играла в лесу. Ее родители недавно переехали в это место, и она, как и всякий ребенок в обход всех запретов, исследовала окрестную местность.&#xA;Блуждая по лесу, Офелия то там, то тут, натыкалась на остатки каких-то сооружений,  древних и странных. На вросших в землю камнях она видела странные знаки, лики и изображения, частично стертые временем, но от этого казавшиеся еще более загадочными и таинственными.&#xA;     Заигравшись, девочка углубилась так далеко в лес, что солнца стало не видно, и ветви деревьев закрыли свет солнца, и не стало видно неба. Офелия испугалась, стала кричать и метаться по лесу, ища выход. Вдруг она увидела арку – вход. На вершине арки было изображение существа с огромными рогами и странной, непонятной надписью: «IN CONSILIIS NOSTRIS FATUM NOSTRUM EST». Девочка решила зайти внутрь и попала в лабиринт.&#xA;     Забыв о том, что она потерялась, Офелия начала кружить по древнему лабиринту и в конце концов попала в самый его центр. А там была огромная дыра со ступенями, ведущими вниз.&#xA;&#xA;     Девочка спустилась вниз. И эта девочка - Вы.&#xA;"
                             carriageReturn="true" beginWithCap="false"/>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="нарисоватьДверь">
            <procedureVariables/>
            <procedureBody>
                <if condition="дверь = нет">
                    <else>
                        <showMessage type="text" message="&#xA;Дверь уже нарисована.&#xA;" carriageReturn="true" beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="МелПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет мела.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ЗаписьВкниге = 1">
                                    <else>
                                        <if condition="ЗаписьВкниге = 3">
                                            <else>
                                                <var value="да" name="дверь"/>
                                                <if condition="ключ = 3">
                                                    <else>
                                                        <showMessage type="text" message="&#xA;Вы не всё сделали для этого.&#xA;"
                                                                     carriageReturn="true" beginWithCap="false"/>
                                                    </else>
                                                    <then>
                                                        <showMessage type="text"
                                                                     message="&#xA;     Вы нарисовали дверь на южной стене пещеры.&#xA;"
                                                                     carriageReturn="true" beginWithCap="false"/>
                                                        <if condition="не ДверьПред в ЦентрЛок.предметы">
                                                            <else/>
                                                            <then>
                                                                <moveItem to="ЦентрЛок.предметы" item="ДверьПред"/>
                                                            </then>
                                                        </if>
                                                        <var value="да" name="дверь"/>
                                                    </then>
                                                </if>
                                            </else>
                                            <then>
                                                <showMessage type="text"
                                                             message="&#xA;     Вы нарисовали дверь на восточной стене пещеры.&#xA;"
                                                             carriageReturn="true" beginWithCap="false"/>
                                                <if condition="не ДверьПред в ЦентрЛок.предметы">
                                                    <else/>
                                                    <then>
                                                        <moveItem to="ЦентрЛок.предметы" item="ДверьПред"/>
                                                    </then>
                                                </if>
                                                <var value="да" name="дверь"/>
                                            </then>
                                        </if>
                                    </else>
                                    <then>
                                        <var value="2" name="ЗаписьВкниге"/>
                                        <showMessage type="text"
                                                     message="&#xA;     Вы нарисовали мелом дверь на северной стене пещеры.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <if condition="не ДверьПред в ЦентрЛок.предметы">
                                            <else/>
                                            <then>
                                                <moveItem to="ЦентрЛок.предметы" item="ДверьПред"/>
                                            </then>
                                        </if>
                                        <var value="да" name="дверь"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="кровь из кувшина">
            <procedureVariables/>
            <procedureBody>
                <if condition="КувшинПред в инвентарий">
                    <else>
                        <showMessage type="text" message="&#xA;У Вас нет кувшина с кровью.&#xA;" carriageReturn="true"
                                     beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="ТекущаяЛокация = АлтарьЛок">
                            <else>
                                <showMessage type="text" message="&#xA;Это не место для жертвоприношений.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;     Вы вылили кровь из кувшина на алтарь. Вдруг на алтаре проступила надпись: Вы принесли в жертву куриную кровь. Жертва принята, но это не та жертва.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ПлохойФиналЛок"/>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="глаза">
            <procedureVariables/>
            <procedureBody>
                <if condition="ТекущаяЛокация=ЕвгЛок">
                    <else>
                        <showMessage type="text" message="Нет тут глаз никаких." carriageReturn="true" beginWithCap="true"/>
                    </else>
                    <then>
                        <showMessage type="text"
                                     message="&#xA;     Вы взглянули на глаза, лежащие на тарелке. Они выглядят неживыми, как будто это  муляжи. Вы потянулись к тарелке, но евг во сне подтянул ее ближе к себе, и Вы не решились повторить снова свою попытку завладеть глазами. Было очень мало шансов, что это удастся.&#xA;"
                                     carriageReturn="true" beginWithCap="true"/>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="кровь на алтарь">
            <procedureVariables/>
            <procedureBody>
                <if condition="КинжалПред в инвентарий">
                    <else>
                        <showMessage type="text" message="&#xA;У Вас нет кинжала.&#xA;" carriageReturn="true" beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="ТекущаяЛокация = АлтарьЛок">
                            <else>
                                <showMessage type="text" message="&#xA;Здесь не место для жертвоприношений.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;     Вы порезали палец кинжалом, и капля крови упала на алтарь. Вдруг на алтаре появилась надпись. Это кровь невинного ребенка. Жертва принята.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ССВЛок"/>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="взять слизь">
            <procedureVariables/>
            <procedureBody>
                <if condition="ТекущаяЛокация = ЯмаЛок">
                    <else>
                        <showMessage type="text" message="&#xA;Здесь нет никакой слизи.&#xA;" carriageReturn="true" beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="ключ=1">
                            <else>
                                <showMessage type="text" message="Нет тут никакой слизи." carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;    Вы попытались взять слизь, но тут же отдернули руку.  Из желтой, с кровяными прожилками, слизи на Вас вылупились... глаза, большие, слегка светящиеся, глаза. Глаза посмотрели на Вас, моргнули и исчезли, напоследок булькнув что то похожее на голлум...&#xA;Покажется же такое, решили Вы.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="говорить">
            <procedureVariables/>
            <procedureBody>
                <showMessage type="text" message="&#xA;Здесь и поговорить не с кем.&#xA;" carriageReturn="true" beginWithCap="false"/>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="датьЖука">
            <procedureVariables/>
            <procedureBody>
                <if condition="ЖукПред в инвентарий">
                    <else>
                        <showMessage type="text" message="&#xA;Здесь нет жука.&#xA;" carriageReturn="true" beginWithCap="false"/>
                    </else>
                    <then>
                        <if condition="ТекущаяЛокация = ЯмаЛок">
                            <else>
                                <showMessage type="text" message="&#xA;Здесь нет ни жука, ни жабы.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ключ = 0">
                                    <else>
                                        <showMessage type="text" message="&#xA;Здесь уже нет жабы.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;     Жаба схватила букашку с протянутой руки и проглотила ее.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <if condition="не ЖукПред в ЯмаЛок.предметы">
                                            <else/>
                                            <then>
                                                <moveItem to="ЯмаЛок.предметы" item="ЖукПред"/>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </then>
                </if>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="Осмотреть себя">
            <procedureVariables/>
            <procedureBody>
                <showMessage type="text" message="     &#xA;Обыкновенная маленькая девочка.&#xA;" carriageReturn="true"
                             beginWithCap="false"/>
            </procedureBody>
            <parameters/>
        </procedure>
        <procedure name="дать мел">
            <procedureVariables/>
            <procedureBody>
                <showMessage type="text" message="&#xA;Предмет очень нужен. Не стоит этого делать." carriageReturn="true"
                             beginWithCap="false"/>
            </procedureBody>
            <parameters/>
        </procedure>
    </procedures>
    <libraries>
        <library>standard/verbs.xml</library>
    </libraries>
    <dictionary>
        <word>
            <ip>замок</ip>
            <rp>замка</rp>
            <dp>замку</dp>
            <vp>замок</vp>
            <tp>замком</tp>
            <pp>замке</pp>
        </word>
        <word>
            <ip>сундук</ip>
            <rp>сундука</rp>
            <dp>сундуку</dp>
            <vp>сундук</vp>
            <tp>сундуком</tp>
            <pp>сундуке</pp>
        </word>
        <word>
            <ip>виноград</ip>
            <rp>винограда</rp>
            <dp>винограду</dp>
            <vp>виноград</vp>
            <tp>виноградом</tp>
            <pp>винограде</pp>
        </word>
        <word>
            <ip>книга</ip>
            <rp>книги</rp>
            <dp>книге</dp>
            <vp>книгу</vp>
            <tp>книгой</tp>
            <pp>книге</pp>
        </word>
        <word>
            <ip>евг</ip>
            <rp>евга</rp>
            <dp>евгу</dp>
            <vp>евга</vp>
            <tp>евгом</tp>
            <pp>евге</pp>
        </word>
        <word>
            <ip>дверь</ip>
            <rp>двери</rp>
            <dp>двери</dp>
            <vp>дверь</vp>
            <tp>дверью</tp>
            <pp>двери</pp>
        </word>
        <word>
            <ip>дверки</ip>
            <rp>дверок</rp>
            <dp>дверкам</dp>
            <vp>дверки</vp>
            <tp>дверками</tp>
            <pp>дверках</pp>
        </word>
        <word>
            <ip>стол</ip>
            <rp>стола</rp>
            <dp>столу</dp>
            <vp>стол</vp>
            <tp>столом</tp>
            <pp>столе</pp>
        </word>
        <word>
            <ip>левая</ip>
            <rp>левой</rp>
            <dp>левой</dp>
            <vp>левую</vp>
            <tp>левой</tp>
            <pp>левой</pp>
        </word>
        <word>
            <ip>куча</ip>
            <rp>кучи</rp>
            <dp>куче</dp>
            <vp>кучу</vp>
            <tp>кучей</tp>
            <pp>куче</pp>
        </word>
        <word>
            <ip>синий</ip>
            <rp>синего</rp>
            <dp>синему</dp>
            <vp>синий</vp>
            <tp>синим</tp>
            <pp>синем</pp>
        </word>
        <word>
            <ip>существо</ip>
            <rp>существа</rp>
            <dp>существу</dp>
            <vp>существо</vp>
            <tp>существом</tp>
            <pp>существе</pp>
        </word>
        <word>
            <ip>девочка</ip>
            <rp>девочки</rp>
            <dp>девочке</dp>
            <vp>девочку</vp>
            <tp>девочкой</tp>
            <pp>девочке</pp>
        </word>
        <word>
            <ip>конфеты</ip>
            <rp>конфет</rp>
            <dp>конфетам</dp>
            <vp>конфет</vp>
            <tp>конфетами</tp>
            <pp>конфетах</pp>
        </word>
        <word>
            <ip>мел</ip>
            <rp>мела</rp>
            <dp>мелу</dp>
            <vp>мел</vp>
            <tp>мелом</tp>
            <pp>меле</pp>
        </word>
        <word>
            <ip>компас</ip>
            <rp>компаса</rp>
            <dp>компасу</dp>
            <vp>компас</vp>
            <tp>компасом</tp>
            <pp>компасе</pp>
        </word>
        <word>
            <ip>мокрица</ip>
            <rp>мокрицы</rp>
            <dp>мокрице</dp>
            <vp>мокрицу</vp>
            <tp>мокрицей</tp>
            <pp>мокрице</pp>
        </word>
        <word>
            <ip>фавн</ip>
            <rp>фавна</rp>
            <dp>фавну</dp>
            <vp>фавна</vp>
            <tp>фавном</tp>
            <pp>фавне</pp>
        </word>
        <word>
            <ip>бутылка</ip>
            <rp>бутылки</rp>
            <dp>бутылке</dp>
            <vp>бутылку</vp>
            <tp>бутылкой</tp>
            <pp>бутылке</pp>
        </word>
        <word>
            <ip>средняя</ip>
            <rp>средней</rp>
            <dp>средней</dp>
            <vp>среднюю</vp>
            <tp>средней</tp>
            <pp>средней</pp>
        </word>
        <word>
            <ip>кинжал</ip>
            <rp>кинжала</rp>
            <dp>кинжалу</dp>
            <vp>кинжал</vp>
            <tp>кинжалом</tp>
            <pp>кинжале</pp>
        </word>
        <word>
            <ip>дверка</ip>
            <rp>дверки</rp>
            <dp>дверке</dp>
            <vp>дверку</vp>
            <tp>дверкой</tp>
            <pp>дверке</pp>
        </word>
        <word>
            <ip>пикси</ip>
            <rp>пикси</rp>
            <dp>пикси</dp>
            <vp>пикси</vp>
            <tp>пикси</tp>
            <pp>пикси</pp>
        </word>
        <word>
            <ip>бутылочка</ip>
            <rp>бутылочки</rp>
            <dp>бутылочку</dp>
            <vp>бутылочку</vp>
            <tp>бутылочкой</tp>
            <pp>бутылочке</pp>
        </word>
        <word>
            <ip>бледное</ip>
            <rp>бледного</rp>
            <dp>бледному</dp>
            <vp>бледное</vp>
            <tp>бледным</tp>
            <pp>бледном</pp>
        </word>
        <word>
            <ip>лягушка</ip>
            <rp>лягушки</rp>
            <dp>лягушке</dp>
            <vp>лягушку</vp>
            <tp>лягушкой</tp>
            <pp>лягушке</pp>
        </word>
        <word>
            <ip>жуки и мокрицы</ip>
            <rp>жуков и мокриц</rp>
            <dp>жукам и мокрицам</dp>
            <vp>жуков и мокриц</vp>
            <tp>жуками и мокрицами</tp>
            <pp>жуках и мокрицах</pp>
        </word>
        <word>
            <ip>жук</ip>
            <rp>жука</rp>
            <dp>жуку</dp>
            <vp>жука</vp>
            <tp>жуком</tp>
            <pp>жуке</pp>
        </word>
        <word>
            <ip>стена</ip>
            <rp>стены</rp>
            <dp>стене</dp>
            <vp>стену</vp>
            <tp>стеной</tp>
            <pp>стене</pp>
        </word>
        <word>
            <ip>статуя</ip>
            <rp>статуи</rp>
            <dp>статуе</dp>
            <vp>статую</vp>
            <tp>статуей</tp>
            <pp>статуе</pp>
        </word>
        <word>
            <ip>жаба</ip>
            <rp>жабы</rp>
            <dp>жабе</dp>
            <vp>жабу</vp>
            <tp>жабой</tp>
            <pp>жабе</pp>
        </word>
        <word>
            <ip>потолок</ip>
            <rp>потолка</rp>
            <dp>потолку</dp>
            <vp>потолок</vp>
            <tp>потолком</tp>
            <pp>потолке</pp>
        </word>
        <word>
            <ip>пустой</ip>
            <rp>пустого</rp>
            <dp>пустому</dp>
            <vp>пустой</vp>
            <tp>пустым</tp>
            <pp>пустом</pp>
        </word>
        <word>
            <ip>правая</ip>
            <rp>правой</rp>
            <dp>правой</dp>
            <vp>правую</vp>
            <tp>правой</tp>
            <pp>правой</pp>
        </word>
        <word>
            <ip>картины</ip>
            <rp>картин</rp>
            <dp>картинам</dp>
            <vp>картины</vp>
            <tp>картинами</tp>
            <pp>картинах</pp>
        </word>
        <word>
            <ip>дверца</ip>
            <rp>дверцы</rp>
            <dp>дверце</dp>
            <vp>дверцу</vp>
            <tp>дверцей</tp>
            <pp>дверце</pp>
        </word>
        <word>
            <ip>пол</ip>
            <rp>пола</rp>
            <dp>полу</dp>
            <vp>пол</vp>
            <tp>полом</tp>
            <pp>поле</pp>
        </word>
        <word>
            <ip>часы</ip>
            <rp>часов</rp>
            <dp>часам</dp>
            <vp>часы</vp>
            <tp>часами</tp>
            <pp>часах</pp>
        </word>
        <word>
            <ip>Ключ</ip>
            <rp>ключа</rp>
            <dp>ключу</dp>
            <vp>ключ</vp>
            <tp>ключем</tp>
            <pp>ключе</pp>
        </word>
        <word>
            <ip>кувшин</ip>
            <rp>кувшина</rp>
            <dp>кувшину</dp>
            <vp>кувшин</vp>
            <tp>кувшином</tp>
            <pp>кувшине</pp>
        </word>
        <word>
            <ip>жопорез</ip>
        </word>
        <word>
            <ip>камень</ip>
            <rp>камня</rp>
            <dp>камню</dp>
            <vp>камень</vp>
            <tp>камнем</tp>
            <pp>камне</pp>
        </word>
        <word>
            <ip>дверцы</ip>
            <rp>дверец</rp>
            <dp>дверцам</dp>
            <vp>дверцы</vp>
            <tp>дверцами</tp>
            <pp>дверцах</pp>
        </word>
        <word>
            <ip>фея</ip>
            <rp>фею</rp>
            <dp>фее</dp>
            <vp>фею</vp>
            <tp>феей</tp>
            <pp>фее</pp>
        </word>
        <word>
            <ip>алтарь</ip>
            <rp>алтаря</rp>
            <dp>алтарю</dp>
            <vp>алтарь</vp>
            <tp>алтарем</tp>
            <pp>алтаре</pp>
        </word>
        <word>
            <ip>каменный</ip>
            <rp>каменного</rp>
            <dp>каменному</dp>
            <vp>каменный</vp>
            <tp>каменным</tp>
            <pp>каменном</pp>
        </word>
        <word>
            <ip>с кровью</ip>
            <rp>с кровью</rp>
            <dp>с кровью</dp>
            <vp>с кровью</vp>
            <tp>с кровью</tp>
            <pp>с кровью</pp>
        </word>
        <word>
            <ip>факел</ip>
            <rp>факела</rp>
            <dp>факелу</dp>
            <vp>факел</vp>
            <tp>факелом</tp>
            <pp>факеле</pp>
        </word>
        <word>
            <ip>букашка</ip>
            <rp>букашки</rp>
            <dp>букашке</dp>
            <vp>букашку</vp>
            <tp>букашкой</tp>
            <pp>букашке</pp>
        </word>
        <word>
            <ip>стены</ip>
            <rp>стен</rp>
            <dp>стенам</dp>
            <vp>стены</vp>
            <tp>стенами</tp>
            <pp>стенах</pp>
        </word>
        <word>
            <ip>зефир</ip>
            <rp>зефира</rp>
            <dp>зефиру</dp>
            <vp>зефир</vp>
            <tp>зефиром</tp>
            <pp>зефире</pp>
        </word>
        <word>
            <ip>фрукты</ip>
            <rp>фруктов</rp>
            <dp>фруктам</dp>
            <vp>фрукты</vp>
            <tp>фруктами</tp>
            <pp>фруктах</pp>
        </word>
        <word>
            <ip>детские</ip>
            <rp>детских</rp>
            <dp>детским</dp>
            <vp>детские</vp>
            <tp>детскими</tp>
            <pp>детских</pp>
        </word>
        <word>
            <ip>вещи</ip>
            <rp>вещей</rp>
            <dp>вещам</dp>
            <vp>вещи</vp>
            <tp>вещами</tp>
            <pp>вещах</pp>
        </word>
    </dictionary>
    <locations>
        <location name="пещера в центре лабиринта" id="ЦентрЛок">
            <hooks>
                <hook type="instead" objectElement="" action="осмотреться">
                    <instructions>
                        <if condition="пещера=1">
                            <else>
                                <showMessage type="text"
                                             message="&#xA;     Помещение представляет собой пещеру. Стены комнаты-пещеры ровные и гладкие. В центре комнаты стоит статуя. Пол сухой и ровный. Потолка в комнате нет вообще, вместо потолка видно небо, голубеющее где-то там, вдали, спокойное и безмятежное.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <if condition="дверь = да">
                                    <else>
                                        <showMessage type="text" message="&#xA;Из  пещеры нет выходов.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <if condition="ключ = 2">
                                            <else>
                                                <if condition="ключ = 3">
                                                    <else>
                                                        <showMessage type="text" message="&#xA;На северной стене пещеры дверь.&#xA;"
                                                                     carriageReturn="true" beginWithCap="false"/>
                                                    </else>
                                                    <then>
                                                        <showMessage type="text" message="&#xA;На южной стене пещеры дверь.&#xA;"
                                                                     carriageReturn="true" beginWithCap="false"/>
                                                    </then>
                                                </if>
                                            </else>
                                            <then>
                                                <showMessage type="text" message="&#xA;На восточной стороне пещеры дверь.&#xA;"
                                                             carriageReturn="true" beginWithCap="false"/>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                                <loop condition="не предмет.частьПейзажа" element="предмет" collection="ТекущаяЛокация.Предметы">
                                    <alone>
                                        <showMessage type="expression" message="'Здесь ' + предмет.имя + '.'" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </alone>
                                    <first>
                                        <showMessage type="expression" message="'Здесь ' + предмет.имя" carriageReturn="false"
                                                     beginWithCap="false"/>
                                    </first>
                                    <next>
                                        <showMessage type="expression" message="', ' + предмет.имя" carriageReturn="false"
                                                     beginWithCap="false"/>
                                    </next>
                                    <last>
                                        <showMessage type="expression" message="' и ' + предмет.имя + '.'" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </last>
                                </loop>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xD;&#xA;     Пол был испещрен какими-то линиями. Девочка поднялась чуть-чуть наверх и снова взглянула на линии на полу. Линии оказались двойником лабиринта наверху.&#xD;&#xA;В центре лабиринта стоит статуя.&#xD;&#xA;&#xD;&#xA;- Это я, - вдруг раздался голос неизвестно откуда появившегося существа, то ли зверя, то ли человека. - А это, - существо показало на девушку на статуе, – Вы.&#xD;&#xA;- Кто вы? – спросила Офелия.&#xD;&#xA;- Я фавн, принцесса.&#xD;&#xA;- А,а... А я не принцесса.&#xD;&#xA;- Вы - принцесса Муанна, дочь короля эльфов, потерянная многие тысячи лет назад и найденная только теперь. Я дам Вам Книгу Судеб. Она подскажет, как найти дорогу домой, принцесса.&#xD;&#xA;&#xD;&#xA;     Сказав это, фавн отдал девочке книгу и стал подниматься по ступеням, ведущим вверх. С каждым его шагом, одна за другой, ступени исчезали.&#xD;&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <var value="2" name="пещера"/>
                                <if condition="не КнигаПред в инвентарий">
                                    <else/>
                                    <then>
                                        <moveItem to="инвентарий" item="КнигаПред"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="" action="идти на север">
                    <instructions>
                        <if condition="дверь = да">
                            <else>
                                <showMessage type="text" message="&#xA;В этом направлении прохода нет.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ЗаписьВкниге = 2">
                                    <else/>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;Вы пошли на север через нарисованную мелом дверь в стене.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <goToLoc location="ЯмаЛок"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="" action="идти на восток">
                    <instructions>
                        <if condition="дверь=да">
                            <else>
                                <showMessage type="text" message="&#xA;В этом напрвлении не прохода.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ЗаписьВкниге = 3">
                                    <else>
                                        <showMessage type="text" message="&#xA;Туда нет прохода.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <showMessage type="text" message="&#xA;Вы пошли на восток через нарисованную мелом дверь.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <goToLoc location="ЕвгЛок"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="" action="взять всё">
                    <instructions>
                        <showMessage type="text" message="Нельзя взять всё. Можно взять немножко ;-)" carriageReturn="true"
                                     beginWithCap="false"/>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="" action="идти на юг">
                    <instructions>
                        <if condition="дверь = да">
                            <else>
                                <showMessage type="text" message="&#xA;Туда нет прохода.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ЗаписьВкниге = 4">
                                    <else>
                                        <showMessage type="text" message="&#xA;Туда нет прохода.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <if condition="ключ = 3">
                                            <else>
                                                <showMessage type="text" message="&#xA;Туда нет прохода.&#xA;" carriageReturn="true"
                                                             beginWithCap="false"/>
                                            </else>
                                            <then>
                                                <showMessage type="text"
                                                             message="&#xA;Вы пошли на юг через нарисованную в стене дверь.&#xA;"
                                                             carriageReturn="true" beginWithCap="false"/>
                                                <goToLoc location="АлтарьЛок"/>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words/>
            <description/>
            <attributes/>
        </location>
        <location name="тронная зала" id="ССВЛок">
            <hooks/>
            <roles/>
            <properties/>
            <words/>
            <description>Алтарь отодвинулся, открывая скрытое до сих пор отверстие подземного хода. Вниз, куда-то в темноту, ведут ступени.
                Принцесса Муанна начала спуск в черноту неизвестности. Она шла и шла. А ступени все не кончались. Внезапно, при очередном
                шаге, девочку ослепил яркий свет. Она остановилась и зажмурилась. Когда девочка открыла глаза, то увидела, что находится в
                центре огромного зала. Со всех сторон ее окружают эльфы. Они аплодируют ей, выкрикивают приветствия и улыбаются. В дальнем
                конце зала расположены три огромных, как деревья, трона. На центральном сидит мужчина в высокой короне, а справа от него
                прекраснейшая женщина. Ее голова украшена диадемой. Левый трон пуст.
                - Вот Вы и дома, принцесса. – Муанна обернулась и увидела фавна.
                - Это были всего лишь испытания, принцесса. И Вы все сделали правильно.
                Принцесса Муанна подбежала к трону отца. Король эльфов – ее отец, и королева эльфов – ее мать, уже ждали ее у подножия своих
                тронов.
                - А теперь, - сказали они, - занимай своё место рядом с нами. Оно, по праву, твоё.

                Поздравляем. Вы победили.
                Игра закончена.
            </description>
            <attributes/>
        </location>
        <location name="яма жабы" id="ЯмаЛок">
            <hooks>
                <hook type="instead" objectElement="" action="идти на юг">
                    <instructions>
                        <if condition="ключ = 2">
                            <else>
                                <showMessage type="text" message="&#xA;Вы пошли на юг.&#xA;" carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ЦентрЛок"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;Вы вернулись в центральную пещеру. Нарисованная мелом дверь закрылась.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ЦентрЛок"/>
                                <var value="нет" name="дверь"/>
                                <if condition="не ДверьПред в СкрытаяЛок.предметы">
                                    <else/>
                                    <then>
                                        <moveItem to="СкрытаяЛок.предметы" item="ДверьПред"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="" action="взять всё">
                    <instructions>
                        <showMessage type="text" message="Нельзя взять всё. Можно взять немножко ;-)" carriageReturn="true"
                                     beginWithCap="false"/>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words/>
            <description>
                Та же пещера, те же каменные стены, тот же пол, но здесь сыро. По стенам этой пещеры стекает вода, которая собирается в
                центре, где находится яма, из которой раздаются какие-то странные звуки.
                На южной стене открытая дверь.
            </description>
            <attributes/>
            <south>ЦентрЛок</south>
        </location>
        <location name="комната евга" id="ЕвгЛок">
            <hooks>
                <hook type="instead" objectElement="" action="взять всё">
                    <instructions>
                        <showMessage type="text" message="Нельзя взять всё. Можно взять немножко ;-)" carriageReturn="true"
                                     beginWithCap="false"/>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="" action="идти на запад">
                    <instructions>
                        <if condition="ключ=3">
                            <else>
                                <showMessage type="text" message="Вы пошли на запад." carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ЦентрЛок"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="Принцесса Муанна вбежала в пещеру в центре лабиринта. &#xD;&#xA;&#xD;&#xA;Позади слышались тяжелые, шаркающие шаги, и сиплое, с одышкой, дыхание евга.&#xD;&#xA;&#xD;&#xA;Вот в проеме показался и сам евг. Он вытягивал руки вперед, водя ладонями со вставленными в них глазами во все стороны, пытаясь увидеть девочку.&#xD;&#xA;Тут дверь закрылась. Девочка с ужасом смотрела на то место, где была дверь.&#xD;&#xA;&#xD;&#xA;Вдруг с той стороны раздался сильный удар, как будто деревянным тараном били в каменную стену.&#xD;&#xA;&#xD;&#xA;Удар.&#xD;&#xA;&#xD;&#xA;Еще один.&#xD;&#xA;&#xD;&#xA;И еще.&#xD;&#xA;...&#xD;&#xA;Вдруг все стихло.&#xD;&#xA;Девочку бил озноб. Приключение стало совсем не забавным.&#xD;&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ЦентрЛок"/>
                                <var value="4" name="ЗаписьВкниге"/>
                                <var value="нет" name="дверь"/>
                                <if condition="не ДверьПред в СкрытаяЛок.предметы">
                                    <else/>
                                    <then>
                                        <moveItem to="СкрытаяЛок.предметы" item="ДверьПред"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words/>
            <description>
                Помещение представляет из себя длинную комнату. Практически все ее пространство занимает стол, уставленный всевозможными
                яствами. Во главе стола сидит странное бледное существо. На стенах комнаты развешаны картины. На стене за бледным существом
                три дверцы. На полу комнаты, в углу, кучей сложены детские вещи.
                На западной стене пещеры открытая дверь.
            </description>
            <attributes/>
            <west>ЦентрЛок</west>
        </location>
        <location name="алтарная комната" id="АлтарьЛок">
            <hooks>
                <hook type="instead" objectElement="" action="взять всё">
                    <instructions>
                        <showMessage type="text" message="Нельзя взять всё. Можно взять немножко ;-)" carriageReturn="true"
                                     beginWithCap="false"/>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words/>
            <description>
                Та же пещера. По стенам комнаты, поддерживая свод, уходят ввысь древние дорические колонны. Пол выложен мозаичной плиткой. В
                центре комнаты находится алтарь, который ярко освещен лучами полуденного солнца, падающими сверху через отверстие в своде.
                Вся остальная часть пещеры прячется в тени.
            </description>
            <attributes/>
            <north>ЦентрЛок</north>
        </location>
        <location name="скрытая" id="СкрытаяЛок">
            <hooks/>
            <roles/>
            <properties/>
            <words/>
            <description>Это просто скрытая локация. Кладовка. Нехрен тут шариться.</description>
            <attributes/>
        </location>
        <location name="финал" id="ПлохойФиналЛок">
            <hooks/>
            <roles/>
            <properties/>
            <words/>
            <description>
                К сожалению принцессе не удалось попасть домой.

                Стоит попытаться еще раз.

                А пока: КОНЕЦ!
            </description>
            <attributes/>
        </location>
    </locations>
    <items>
        <item name="евг" id="ЕвгПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="осмотреть">
                    <instructions>
                        <if condition="ключ = 3">
                            <else>
                                <showMessage type="text"
                                             message="    &#xA;     Существо с бледной провисшей кожей,  как будто некогда это существо было очень толстым, а потом сильно похудело. На лысой голове нет глаз, а вместо носа виднеются две дырочки.&#xA;    Евг, а это был он, сидит не двигаясь. &#xA;    Перед ним на тарелке лежат два глаза. Странное блюдо, странные вкусы.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message=" &#xA;     Существо с бледной провисшей кожей,  как будто некогда это существо было очень толстым, а потом сильно похудело. На лысой голове нет глаз, а вместо носа виднеются две дырочки.&#xA;     Евг стоит перед Вами с вытянутыми вперед руками, в ладони которых вставлены его глаза. И он приближается.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="евг">
                <word>евг</word>
                <word>бледное</word>
                <word>существо</word>
            </words>
            <description/>
            <attributes>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="картины" id="КартиныПред">
            <hooks/>
            <roles/>
            <properties/>
            <words mainWord="картины">
                <word>картины</word>
            </words>
            <description>
                На картинах изображен евг. Он убивает и ест детей. На одной картине евг протыкает ребенка кинжалом, на другой отрывает ему
                голову, на третьей пьет кровь из горла.
            </description>
            <attributes>
                <attribute>прикреплён</attribute>
                <attribute>недоступен</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="стол" id="СтолПред">
            <hooks/>
            <roles/>
            <properties/>
            <words mainWord="стол">
                <word>стол</word>
            </words>
            <description>Весь стол заставлен блюдами с экзотическими фруктами, но особенно привлекательно выглядит виноград.
            </description>
            <attributes>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="ключ" id="КлючПред">
            <hooks>
                <hook type="instead" objectElement="чтоОткрыть" action="открыть">
                    <instructions>
                        <if condition="КлючПред в инвентарь">
                            <else>
                                <showMessage type="text" message="У меня еще нет ключа =(" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text" message="Ключ у меня - пора идти к фавну" carriageReturn="true"
                                             beginWithCap="true"/>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="предмет" action="взять">
                    <instructions>
                        <if condition="ключ = 3">
                            <else>
                                <showMessage type="text" message="&#xA;Вы взяли ключ.&#xA;" carriageReturn="true" beginWithCap="false"/>
                                <if condition="не КлючПред в инвентарий">
                                    <else/>
                                    <then>
                                        <moveItem to="инвентарий" item="КлючПред"/>
                                    </then>
                                </if>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;Вы попытались снять ключ из замочной скважины, но он застрял там. Вы покрутили ключом влево и вправо, но он не вынимался. Увлекшись этим занятием Вы не обращали внимания на то, что творится за вашей спиной пока не почувствовали на своей шее холодное прикосновение ....&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                                <goToLoc location="ПлохойФиналЛок"/>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="Ключ">
                <word>Ключ</word>
            </words>
            <description>
                Массивный, старый, бронзовый ключ с узорной головкой и затейливой бороздкой.
                Местами покрыт зеленой патиной.
            </description>
            <attributes/>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="мел" id="МелПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="взять">
                    <instructions>
                        <if condition="не МелПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас уже есть мел.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="СтатуяМел = нет">
                                    <else>
                                        <if condition="не МелПред в инвентарий">
                                            <else/>
                                            <then>
                                                <moveItem to="инвентарий" item="МелПред"/>
                                            </then>
                                        </if>
                                        <showMessage type="text" message="&#xA;Вы взяли мел.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                        <var value="1" name="статуя"/>
                                    </else>
                                    <then>
                                        <showMessage type="text" message="&#xA;Где Вы видите здесь мел?&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="мел">
                <word>мел</word>
            </words>
            <description>
                Обычный мел, которым в школе пишут на доске.
            </description>
            <attributes>
                <attribute>хрупкий</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="книга судеб" id="КнигаПред">
            <hooks>
                <hook type="instead" objectElement="чтоОткрыть" action="открыть">
                    <instructions>
                        <if condition="КнигаОткрыта=нет">
                            <else>
                                <showMessage type="text" message="&#xA;Книга уже открыта.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text" message="&#xA;Вы открыли книгу.&#xA;" carriageReturn="true" beginWithCap="false"/>
                                <var value="да" name="КнигаОткрыта"/>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="предмет" action="читать">
                    <instructions>
                        <if condition="КнигаПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет никакой книги..&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ЗаписьВкниге=1">
                                    <else>
                                        <if condition="ЗаписьВкниге=2">
                                            <else>
                                                <if condition="ЗаписьВкниге=3">
                                                    <else>
                                                        <if condition="ЗаписьВкниге=4">
                                                            <else>
                                                                <showMessage type="expression"
                                                                             message="'ОШИБКА! ЗаписьВкниге не в диапазоне 1-4! ЗаписьВкниге = ' + ЗаписьВкниге"
                                                                             carriageReturn="true" beginWithCap="false"/>
                                                            </else>
                                                            <then>
                                                                <showMessage type="text"
                                                                             message="&#xA;Нужно пролить на алтарь кровь невинного ребенка. Помни, только кровь и ничего больше. Алтарь готов принять только одну жертву.&#xA;&#xA;В книге записей больше нет.&#xA;&#xA;Вы закрыли книгу.&#xA;"
                                                                             carriageReturn="true" beginWithCap="false"/>
                                                                <var value="нет" name="КнигаОткрыта"/>
                                                            </then>
                                                        </if>
                                                    </else>
                                                    <then>
                                                        <showMessage type="text"
                                                                     message="&#xA;     Чтобы принцессе Муане вернуться домой, необходимо принести в жертву кровь невинного дитя на алтаре. Для этого ей нужно попасть в комнату с тремя дверцами на стене. Но пройти к эти дверцам не просто, их охраняют, и это не человек. Это евг, порождение циклопа Полифема, сына Посейдона, и Энио, дочери Форкия и сестры Горгоны.&#xA;     Обычно евг спит. Когда он сыт, то его сон подобен спячке удава, переваривающего добычу, но, когда голоден, его сон не крепок. Если евг голоден, то это сразу заметно по его бледному виду и обвисшей коже.&#xA;     Рядом с ним на стене три дверцы, которые можно открыть найденным ключом. Вряд ли получится открыть все дверки сразу. Когда откроется дверца, евг может почувствовать это и проснуться. Сразу евг не может ничего видеть, но через какое-то время он прозреет. Пока евг слеп, нужно успеть забрать содержимое за дверцей и покинуть комнату.&#xA;&#xA;Вы закрыли книгу.&#xA;&#xA;"
                                                                     carriageReturn="true" beginWithCap="false"/>
                                                        <var value="нет" name="КнигаОткрыта"/>
                                                    </then>
                                                </if>
                                            </else>
                                            <then>
                                                <showMessage type="text"
                                                             message="&#xA;Необходимо найти ключ. Ключ этот проглочен огромной жабой. Чтобы жаба выплюнула ключ нужно найти камень и заставить жабу его проглотить.&#xA;&#xA;Вы закрыли книгу.&#xA;&#xA;"
                                                             carriageReturn="true" beginWithCap="false"/>
                                                <var value="нет" name="КнигаОткрыта"/>
                                                <var value="3" name="статуя"/>
                                                <if condition="не КаменьПред в СтатуяПред.предметыСверху">
                                                    <else/>
                                                    <then>
                                                        <if condition="не КаменьПред в инвентарий">
                                                            <else/>
                                                            <then>
                                                                <moveItem to="СтатуяПред.предметыСверху" item="КаменьПред"/>
                                                            </then>
                                                        </if>
                                                    </then>
                                                </if>
                                            </then>
                                        </if>
                                    </else>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;Для того, чтобы попасть в подземный мир, нужно нарисовать на стене мелом дверь. И дверь эта отворится сама.&#xA;&#xA;Вы закрыли книгу.&#xA;&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <var value="нет" name="КнигаОткрыта"/>
                                        <if condition="не МелПред в СтатуяПред.предметыСверху">
                                            <else/>
                                            <then>
                                                <if condition="не МелПред в инвентарий">
                                                    <else/>
                                                    <then>
                                                        <moveItem to="СтатуяПред.предметыСверху" item="МелПред"/>
                                                    </then>
                                                </if>
                                            </then>
                                        </if>
                                        <var value="2" name="статуя"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="книга">
                <word>книга</word>
            </words>
            <description>
                Большая, старинная книга в черном кожаном переплете с золотым тиснением, металлическими уголками, и металлическим замком.
            </description>
            <attributes/>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="синий камень" id="КаменьПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="взять">
                    <instructions>
                        <if condition="не КаменьПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас уже есть камень.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="СтатуяКамень = нет">
                                    <else>
                                        <if condition="не КаменьПред в инвентарий">
                                            <else/>
                                            <then>
                                                <moveItem to="инвентарий" item="КаменьПред"/>
                                            </then>
                                        </if>
                                        <showMessage type="text" message="&#xA;Вы взяли камень.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                        <var value="1" name="статуя"/>
                                    </else>
                                    <then>
                                        <showMessage type="text" message="&#xA;Где Вы видите здесь камень?&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles>
                <role name="поверхность">
                    <properties>
                        <property name="предметыСверху"/>
                    </properties>
                </role>
            </roles>
            <properties/>
            <words mainWord="камень">
                <word>камень</word>
                <word>синий</word>
            </words>
            <description>Яркий синий камень, с волшебными свойствами. Какими - никто не знает. Возможно, рвотными.
            </description>
            <attributes/>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="левая дверка" id="ЛеваяДверкаПред">
            <hooks>
                <hook type="instead" objectElement="чтоОткрыть" action="открыть">
                    <instructions>
                        <if condition="ключПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет ключа, чтобы открыть эту дверку.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;Принцесса открыла дверцу, сунула внутрь руку и вытащила оттуда кувшин.&#xA;&#xA;За своей спиной она услышала какой-то скрежет. Это проснулся евг. Сквозь сон он услышал звук открываемой дверки, и его руки с острыми когтями начали шарить по столу в поисках тарелки с глазами. И вот, тарелка найдена.&#xA;"
                                             carriageReturn="true" beginWithCap="true"/>
                                <if condition="не ПустойКувшинПред в инвентарий">
                                    <else/>
                                    <then>
                                        <moveItem to="инвентарий" item="ПустойКувшинПред"/>
                                    </then>
                                </if>
                                <var value="3" name="ключ"/>
                                <if condition="не КлючПред в ЕвгЛок.предметы">
                                    <else/>
                                    <then>
                                        <moveItem to="ЕвгЛок.предметы" item="КлючПред"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="дверка">
                <word>дверка</word>
                <word>дверца</word>
                <word>правая</word>
                <word>дверцы</word>
                <word>дверки</word>
                <word>дверь</word>
            </words>
            <description>
                На дверце начертано:

                Чтоб ты ни делал, рок с кинжалом острым - рядом,
                Коварен и жесток он к человечьим чадам.
                Хотя б тебе в уста им вложен пряник был,
                Смотри, не ешь его, - он, верно, смешан с ядом.
            </description>
            <attributes>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="средняя дверка" id="СредняяДверкаПред">
            <hooks>
                <hook type="instead" objectElement="чтоОткрыть" action="открыть">
                    <instructions>
                        <if condition="ключПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет ключа, чтобы открыть эту дверку.&#xA;"
                                             carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;Принцесса открыла дверцу, сунула внутрь руку и вытащила оттуда кувшин.&#xA;&#xA;За своей спиной она услышала какой-то скрежет. Это проснулся евг. Сквозь сон он услышал звук открываемой дверки, и его руки с острыми когтями начали шарить по столу в поисках тарелки с глазами. И вот, тарелка найдена.&#xA; "
                                             carriageReturn="true" beginWithCap="false"/>
                                <if condition="не КувшинПред в инвентарий">
                                    <else/>
                                    <then>
                                        <moveItem to="инвентарий" item="КувшинПред"/>
                                    </then>
                                </if>
                                <var value="3" name="ключ"/>
                                <if condition="не КлючПред в ЕвгЛок.предметы">
                                    <else/>
                                    <then>
                                        <moveItem to="ЕвгЛок.предметы" item="КлючПред"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="дверка">
                <word>дверка</word>
                <word>дверца</word>
                <word>средняя</word>
                <word>дверцы</word>
                <word>дверки</word>
                <word>дверь</word>
            </words>
            <description>
                На дверце начертано:

                Скудеет в жилах кровь, скудеют наши силы,
                Ах, мало ли сердец убил ты, рок постылый!
                Кто в дальний путь ушел, тот навсегда исчез,
                Нам некого спросить о крае за могилой.
            </description>
            <attributes>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="правая дверка" id="ПраваяДверкаПред">
            <hooks>
                <hook type="instead" objectElement="чтоОткрыть" action="открыть">
                    <instructions>
                        <if condition="ключПред в инвентарий">
                            <else>
                                <showMessage type="text" message="Вы не можете открыть дверку, без ключа." carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;Принцесса открыла дверцу, сунула внутрь руку и вытащила оттуда кинжал.&#xA;&#xA;За своей спиной она услышала какой-то скрежет. Это проснулся евг. Сквозь сон он услышал звук открываемой дверки, и его руки с острыми когтями начали шарить по столу в поисках тарелки с глазами. И вот, тарелка найдена.&#xA; "
                                             carriageReturn="true" beginWithCap="false"/>
                                <if condition="не КинжалПред в инвентарий">
                                    <else/>
                                    <then>
                                        <moveItem to="инвентарий" item="КинжалПред"/>
                                    </then>
                                </if>
                                <var value="3" name="ключ"/>
                                <if condition="не КлючПред в ЕвгЛок.предметы">
                                    <else/>
                                    <then>
                                        <moveItem to="ЕвгЛок.предметы" item="КлючПред"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="дверка">
                <word>дверка</word>
                <word>левая</word>
                <word>дверца</word>
                <word>дверцы</word>
                <word>дверки</word>
                <word>дверь</word>
            </words>
            <description>
                На дверце начертано:

                Где тот яд, что страданья души исцелит?
                Где кинжал, что мученья мои прекратит?
                Где удар, что сразит меня волею неба?
                Смерть приму я, как верным принять надлежит!
            </description>
            <attributes>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="статуя" id="СтатуяПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="осмотреть">
                    <instructions>
                        <if condition="статуя = 1">
                            <else>
                                <if condition="дверь = нет">
                                    <else>
                                        <if condition="статуя = 3">
                                            <else/>
                                            <then>
                                                <showMessage type="text"
                                                             message="&#xA;&#xA;Статуя изображает  фавна, бога пастушества и скотоводства, плодородия и дикой природы, человека с козлиными ногами, рогами и бородой. Рядом с фавном стоит девочка с кинжалом в руке."
                                                             carriageReturn="true" beginWithCap="false"/>
                                                <var value="да" name="СтатуяКамень"/>
                                            </then>
                                        </if>
                                    </else>
                                    <then>
                                        <if condition="статуя = 2">
                                            <else>
                                                <showMessage type="text"
                                                             message="&#xA;&#xA;Статуя изображает  фавна, бога пастушества и скотоводства, плодородия и дикой природы, человека с козлиными ногами, рогами и бородой. Рядом с фавном стоит девочка с кинжалом в руке."
                                                             carriageReturn="true" beginWithCap="false"/>
                                            </else>
                                            <then>
                                                <showMessage type="text"
                                                             message="&#xA;&#xA;Статуя изображает  фавна, бога пастушества и скотоводства, плодородия и дикой природы, человека с козлиными ногами, рогами и бородой. Рядом с фавном стоит девочка с кинжалом в руке."
                                                             carriageReturn="true" beginWithCap="false"/>
                                                <var value="да" name="СтатуяМел"/>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                            </else>
                            <then>
                                <showMessage type="text"
                                             message="&#xA;&#xA;Статуя изображает  фавна, мифического персонажа, бога пастушества и скотоводства, плодородия и дикой природы, человека с козлиными ногами, рогами и бородой. Рядом с фавном стоит девочка с кинжалом в руке."
                                             carriageReturn="true" beginWithCap="false"/>
                            </then>
                        </if>
                        <loop condition="не предмет.частьПейзажа" element="предмет" collection="СтатуяПред.предметыСверху">
                            <alone>
                                <showMessage type="expression" message="'В другой руке у девочки ' + предмет.имя + '.'"
                                             carriageReturn="true" beginWithCap="false"/>
                            </alone>
                            <first>
                                <showMessage type="expression" message="'В другой руке у девочки ' + предмет.имя" carriageReturn="false"
                                             beginWithCap="false"/>
                            </first>
                            <next>
                                <showMessage type="expression" message="', ' + предмет.имя" carriageReturn="false" beginWithCap="false"/>
                            </next>
                            <last>
                                <showMessage type="expression" message="' и ' + предмет.имя + '.'" carriageReturn="true"
                                             beginWithCap="false"/>
                            </last>
                        </loop>
                    </instructions>
                </hook>
            </hooks>
            <roles>
                <role name="поверхность">
                    <properties>
                        <property name="предметыСверху"/>
                    </properties>
                </role>
            </roles>
            <properties/>
            <words mainWord="статуя">
                <word>статуя</word>
            </words>
            <description/>
            <attributes>
                <attribute>частьПейзажа</attribute>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЦентрЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="кинжал" id="КинжалПред">
            <hooks/>
            <roles/>
            <properties/>
            <words mainWord="кинжал">
                <word>кинжал</word>
            </words>
            <description>
                Обоюдоострый кинжал с рукояткой украшенной золотом и драгоценными камнями. Гарда кинжала сделана в виде бараньих рогов –
                совсем как у фавна.
            </description>
            <attributes/>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="жаба" id="ЖабаПред">
            <hooks/>
            <roles/>
            <properties/>
            <words mainWord="жаба">
                <word>жаба</word>
                <word>лягушка</word>
            </words>
            <description>
                Огромная, желтая жаба. Ее маленькие, налитые кровью глазки смотрят на окружающее с тупой, коровьей пустотой. Видно было, что
                ее единственным желанием было только одно - поесть.
            </description>
            <attributes>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="виноград" id="ВиноградПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="съесть">
                    <instructions>
                        <showMessage type="text"
                                     message="Муанна оторвала ягоду от кисти.&#xA;Девочка раскусила ее, и ее рот наполнился сладким, освежающим вкусом, свежего виноградного сока. Девочка даже зажмурилась от удовольствия.&#xA;&#xA;Но удовольствие было недолгим.&#xA;&#xA;Чудовище вида ужасного &#xA;Схватило ребенка несчастного&#xA;И стало безжалостно бить его, &#xA;И стало в сортире мочить его, &#xA;В болото толкать комариное, &#xA;На кучу сажать муравьиную, &#xA;Травить его злыми собаками... &#xA;Кормить его тухлыми раками...&#xA;&#xA;&#xA;"
                                     carriageReturn="true" beginWithCap="false"/>
                        <goToLoc location="ПлохойФиналЛок"/>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="предмет" action="взять">
                    <instructions>
                        <showMessage type="text"
                                     message="&#xA;Принцесса взяла в руку гроздь винограда и, не удержавшись от соблазна, оторвала ягоду от кисти. Девочка раскусила ее, и ее рот наполнился сладким, освежающим вкусом, свежего виноградного сока. Девочка даже зажмурилась от удовольствия.&#xA;&#xA;Но удовольствие было недолгим.&#xA;&#xA;Чудовище вида ужасного &#xA;Схватило ребенка несчастного&#xA;И стало безжалостно бить его, &#xA;И стало в сортире мочить его, &#xA;В болото толкать комариное, &#xA;На кучу сажать муравьиную, &#xA;Травить его злыми собаками... &#xA;Кормить его тухлыми раками...&#xA;&#xA;&#xA; "
                                     carriageReturn="true" beginWithCap="false"/>
                        <goToLoc location="ПлохойФиналЛок"/>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="виноград">
                <word>виноград</word>
            </words>
            <description>Крупный, свежий виноград, с прозрачной глянцевой кожицей, под которой отчетливо видны семена.
            </description>
            <attributes/>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="дверь" id="ДверьПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="осмотреть">
                    <instructions>
                        <if condition="дверь = да">
                            <else>
                                <showMessage type="text" message="&#xA;Здесь нет никакой двери.&#xA;" carriageReturn="true"
                                             beginWithCap="false"/>
                            </else>
                            <then>
                                <showMessage type="text" message="&#xA;Дверь открыта.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="предмет" action="взять">
                    <instructions>
                        <showMessage type="text" message="Дверь слишком тяжелая, чтобы таскать ее с собой. " carriageReturn="true"
                                     beginWithCap="false"/>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="дверь">
                <word>дверь</word>
            </words>
            <description/>
            <attributes>
                <attribute>прикреплён</attribute>
                <attribute>частьПейзажа</attribute>
                <attribute>недоступен</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="алтарь" id="Алтарь1">
            <hooks/>
            <roles>
                <role name="поверхность">
                    <properties>
                        <property name="предметыСверху"/>
                    </properties>
                </role>
            </roles>
            <properties/>
            <words mainWord="алтарь">
                <word>алтарь</word>
            </words>
            <description>
                Место, предназначенное для жертвоприношений. Алтарь сделан из черного камня, поверхность которого испещрена кавернами,
                трещинами и странным, затейливым орнаментом, похожим на какие-то буквы.
            </description>
            <attributes>
                <attribute>частьПейзажа</attribute>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>АлтарьЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="букашка" id="ЖукПред">
            <hooks/>
            <roles/>
            <properties/>
            <words mainWord="букашка">
                <word>жук</word>
                <word>мокрица</word>
                <word>жуки и мокрицы</word>
                <word>букашка</word>
            </words>
            <description>
                Мерзкие большие букашки, копошащиеся в грязи. Жуки, мокрицы, сороконожки и прочая гадость.
            </description>
            <attributes/>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЯмаЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="детские вещи" id="ВещиПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="взять">
                    <instructions>
                        <showMessage type="text"
                                     message="Офелия взяла одну вещь, другую, третью.... Все они рассыпались у нее в руках, расползались по ниточкам.&#xA;Давно. Наверное, очень давно лежат тут вещи.&#xA;&#xA;Наконец, девочка бросила это безнадежное занятие."
                                     carriageReturn="true" beginWithCap="false"/>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="вещи">
                <word>вещи</word>
                <word>куча</word>
                <word>детские</word>
            </words>
            <description>
                Платья, рубашки, штаны, ботинки. Все валяются в огромной куче, частично порванные, и практически все - в бурых пятнах
                запекшейся крови.
            </description>
            <attributes>
                <attribute>недоступен</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЕвгЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="пустой кувшин" id="ПустойКувшинПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="выбросить">
                    <instructions>
                        <if condition="ПустойКувшинПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет кувшина.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ТекущаяЛокация = ЕвгЛок">
                                    <else>
                                        <if condition="не ПустойКувшинПред в ТекущаяЛокация.предметы">
                                            <else/>
                                            <then>
                                                <moveItem to="ТекущаяЛокация.предметы" item="ПустойКувшинПред"/>
                                            </then>
                                        </if>
                                    </else>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;Вы завпустили в евга кувшином, но евг нагнулся и кувшин в него не попал.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <if condition="не ПустойКувшинПред в СкрытаяЛок.предметы">
                                            <else/>
                                            <then>
                                                <moveItem to="СкрытаяЛок.предметы" item="ПустойКувшинПред"/>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="чтоПоложить" action="положить">
                    <instructions>
                        <if condition="ПустойКувшинПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет кувшина.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ТекущаяЛокация = АлтарьЛок">
                                    <else>
                                        <showMessage type="text" message="&#xA;Не куда поставить кувшин.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;Вы поставили кувшин на алтарь.&#xA;&#xA;Вдруг на алтаре появилась надпись:&#xA;Это не кровь. Жертва не принята.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <goToLoc location="ПлохойФиналЛок"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="кувшин">
                <word>кувшин</word>
                <word>пустой</word>
            </words>
            <description>
                Пустой медный кувшин, с выщербленным горлышком. Выглядит очень старым.
            </description>
            <attributes>
                <attribute>хрупкий</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="кувшин с кровью" id="КувшинПред">
            <hooks>
                <hook type="instead" objectElement="предмет" action="выбросить">
                    <instructions>
                        <if condition="КувшинПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет кувшина.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ТекущаяЛокация = ЕвгЛок">
                                    <else>
                                        <if condition="не КувшинПред в ТекущаяЛокация.предметы">
                                            <else/>
                                            <then>
                                                <moveItem to="ТекущаяЛокация.предметы" item="КувшинПред"/>
                                            </then>
                                        </if>
                                    </else>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;Вы завпустили в евга кувшином, но евг нагнулся и кувшин в него не попал.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                        <if condition="не КувшинПред в СкрытаяЛок.предметы">
                                            <else/>
                                            <then>
                                                <moveItem to="СкрытаяЛок.предметы" item="КувшинПред"/>
                                            </then>
                                        </if>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
                <hook type="instead" objectElement="чтоПоложить" action="положить">
                    <instructions>
                        <if condition="КувшинПред в инвентарий">
                            <else>
                                <showMessage type="text" message="&#xA;У Вас нет кувшина.&#xA;" carriageReturn="true" beginWithCap="false"/>
                            </else>
                            <then>
                                <if condition="ТекущаяЛокация = АлтарьЛок">
                                    <else>
                                        <showMessage type="text" message="&#xA;Здесь некуда поставить кувшин.&#xA;" carriageReturn="true"
                                                     beginWithCap="false"/>
                                    </else>
                                    <then>
                                        <showMessage type="text"
                                                     message="&#xA;Вы поставили кувшин на алтарь.&#xA;&#xA;Вдруг на алтаре появилась надпись:&#xA;Это не кровь. Жертва не принята.&#xA;"
                                                     carriageReturn="true" beginWithCap="false"/>
                                    </then>
                                </if>
                            </then>
                        </if>
                    </instructions>
                </hook>
            </hooks>
            <roles/>
            <properties/>
            <words mainWord="кувшин">
                <word>кувшин</word>
                <word>с кровью</word>
            </words>
            <description>
                Небольшой гмедный кувшин. Внутри него плещется немного крови.
            </description>
            <attributes>
                <attribute>хрупкий</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>СкрытаяЛок</location>
                </locations>
            </startingPosition>
        </item>
        <item name="каменный кинжал" id="КаменныйКинжалПред">
            <hooks/>
            <roles/>
            <properties/>
            <words mainWord="кинжал">
                <word>кинжал</word>
                <word>каменный</word>
            </words>
            <description>
                Каменный кинжал - фрагмент статуи.
            </description>
            <attributes>
                <attribute>частьПейзажа</attribute>
                <attribute>прикреплён</attribute>
            </attributes>
            <startingPosition>
                <inventory>false</inventory>
                <locations>
                    <location>ЦентрЛок</location>
                </locations>
            </startingPosition>
        </item>
    </items>
    <actions>
        <action description="нарисовать мелом дверь на стене" name="нарисовать">
            <templates>
                <template>
                    <literalElement>
                        <synonym>нарисовать дверь</synonym>
                        <synonym>рисовать дверь</synonym>
                        <synonym>нарисовать дверь мелом</synonym>
                        <synonym>рисовать дверь мелом</synonym>
                        <synonym>нарисовать дверь мелом на стене</synonym>
                        <synonym>рисовать дверь мелом на стене</synonym>
                        <synonym>нарисовать мелом дверь</synonym>
                        <synonym>рисовать мелом дверь</synonym>
                        <synonym>нарисовать мелом дверь на стене</synonym>
                        <synonym>рисовать мелом дверь на стене</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="нарисоватьДверь"/>
            <restrictions/>
        </action>
        <action description="спуститься в яму" name="спуститься">
            <templates>
                <template>
                    <literalElement>
                        <synonym>спуститься в яму</synonym>
                        <synonym>опуститься в яму</synonym>
                        <synonym>идти в яму</synonym>
                        <synonym>зайти в яму</synonym>
                        <synonym>заглянуть в яму</synonym>
                        <synonym>осмотреть яму</synonym>
                        <synonym>осм яму</synonym>
                        <synonym>в яму</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="спуститьсяВЯму"/>
            <restrictions/>
        </action>
        <action description="кормит жабу" name="скормить жабе камень">
            <templates>
                <template>
                    <literalElement>
                        <synonym>скормить жабе камень</synonym>
                        <synonym>дать жабе камень</synonym>
                        <synonym>подсунуть жабе камень</synonym>
                        <synonym>скормить камень жабе</synonym>
                        <synonym>дать камень жабе</synonym>
                        <synonym>подсунуть камень жабе</synonym>
                        <synonym>кормить жабу камнем</synonym>
                        <synonym>кормить камнем жабу</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="каменьЖабе"/>
            <restrictions/>
        </action>
        <action description="искать ключ" name="искать ключ">
            <templates>
                <template>
                    <literalElement>
                        <synonym>искать ключ</synonym>
                        <synonym>осм слизь</synonym>
                        <synonym>осмотреть слизь</synonym>
                        <synonym>осм комок</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>осмотреть комок слизи</synonym>
                        <synonym>осм комок слизи</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>осмотреть блевотину</synonym>
                        <synonym>осм блевотину</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="искатьКлюч"/>
            <restrictions/>
        </action>
        <action description="скормить жабе жука" name="дать жука">
            <templates>
                <template>
                    <literalElement>
                        <synonym>дать жабе жука</synonym>
                        <synonym>дать жабе мокрицу</synonym>
                        <synonym>дать жабе букашку</synonym>
                        <synonym>дать жука жабе</synonym>
                        <synonym>датб мокрицу жабе</synonym>
                        <synonym>дать букашку жабе</synonym>
                        <synonym>скормить жука жабе</synonym>
                        <synonym>скормить букашку жабе</synonym>
                        <synonym>скормить жабе жука</synonym>
                        <synonym>скормить мокрицу жабе</synonym>
                        <synonym>скормить жабе мокрицу</synonym>
                        <synonym>скормить жабе букашку</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="датьЖука"/>
            <restrictions/>
        </action>
        <action description="ударить евга кинжалом" name="ударить кинжалом">
            <templates>
                <template>
                    <literalElement>
                        <synonym>ударить евга кинжалом</synonym>
                        <synonym>бить евга кинжалом</synonym>
                        <synonym>ударить кинжалом евга</synonym>
                        <synonym>бить кинжалом евга</synonym>
                        <synonym>зарезать евга кинжалом</synonym>
                        <synonym>зарезать кинжалом евга</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>убить евга</synonym>
                        <synonym>зарезать евга</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>ударить кинжалом</synonym>
                    </literalElement>
                    <literalElement>
                        <synonym>ударить себя кинжалом</synonym>
                    </literalElement>
                    <literalElement>
                        <synonym>ударить кинжалом себя</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>убить жабу</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="бить"/>
            <restrictions/>
        </action>
        <action description="кровь из кувшина" name="кровь из кувшина">
            <templates>
                <template>
                    <literalElement>
                        <synonym>вылить кровь из кувшина</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>вылить из кувшина кровь</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>вылить кровь на алтарь</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>вылить на алтарь кровь</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>налить кровь на алтарь</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>налить на алтарь кровь</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="кровь из кувшина"/>
            <restrictions/>
        </action>
        <action description="порезать палец кинжалом" name="порезаться">
            <templates>
                <template>
                    <literalElement>
                        <synonym>порезать палец</synonym>
                    </literalElement>
                    <literalElement>
                        <synonym>порезать руку</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>уколоть палец</synonym>
                        <synonym>уколоть руку</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>порезать палец кинжалом</synonym>
                        <synonym>порезать руку кинжалом</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>уколоть палец кинжалом</synonym>
                        <synonym>уколоть руку нинжалом</synonym>
                    </literalElement>
                </template>
                <template>
                    <literalElement>
                        <synonym>резать</synonym>
                        <synonym>порезаться</synonym>
                        <synonym>зарезаться</synonym>
                        <synonym>зарезать себя</synonym>
                        <synonym>пустить кровь</synonym>
                        <synonym>перерезать вены</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="кровь на алтарь"/>
            <restrictions/>
        </action>
        <action description="взять слизь" name="слизь">
            <templates>
                <template>
                    <literalElement>
                        <synonym>взять слизь</synonym>
                        <synonym>поторогать слизь</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="взять слизь"/>
            <restrictions/>
        </action>
        <action description="осмотреть глаза на тарелке" name="осм глаза">
            <templates>
                <template>
                    <literalElement>
                        <synonym>осмотреть глаза</synonym>
                        <synonym>посмотреть глаза</synonym>
                        <synonym>взять глаза</synonym>
                        <synonym>потрогать глаза</synonym>
                        <synonym>осм глаза</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="глаза"/>
            <restrictions/>
        </action>
        <action description="говорить" name="говорить">
            <templates>
                <template>
                    <literalElement>
                        <synonym>говорить</synonym>
                        <synonym>поговорить</synonym>
                        <synonym>спросить</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="говорить"/>
            <restrictions/>
        </action>
        <action description="положить бросить" name="положить">
            <templates>
                <template>
                    <literalElement>
                        <synonym>положить</synonym>
                    </literalElement>
                    <objectElement case="vp"/>
                </template>
            </templates>
            <procedureCall procedure="положить"/>
            <restrictions/>
        </action>
        <action description="" name="осм себя">
            <templates>
                <template>
                    <literalElement>
                        <synonym>осм себя</synonym>
                        <synonym>осмотреть себя</synonym>
                        <synonym>посмотреть на себя</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="Осмотреть себя"/>
            <restrictions/>
        </action>
        <action description="" name="дать мел">
            <templates>
                <template>
                    <literalElement>
                        <synonym>дать мел</synonym>
                        <synonym>дать мел жабе</synonym>
                        <synonym>дать жабе мел</synonym>
                        <synonym>дать мел евгу</synonym>
                        <synonym>дать евгу мел</synonym>
                    </literalElement>
                </template>
            </templates>
            <procedureCall procedure="дать мел"/>
            <restrictions/>
        </action>
    </actions>
</story>
